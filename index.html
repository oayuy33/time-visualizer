<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>时间流逝点阵 - 交互增强版</title>
    <style>
        :root {
            --bg-color: #020617;
            --card-bg: rgba(30, 41, 59, 0.7);
            --dot-empty: #1e293b;
            --dot-fill: #38bdf8;
            --text-main: #f8fafc;
            --text-dim: #64748b;
            --glow: rgba(56, 189, 248, 0.5);
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #020617 100%);
            color: var(--text-main);
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 650px;
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.8);
        }

        h1 { font-weight: 300; letter-spacing: 2px; margin-bottom: 2rem; text-align: center; color: #bae6fd; }

        .section { margin-bottom: 2.5rem; }

        .header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-dim);
        }

        .dots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(12px, 1fr));
            gap: 6px;
        }

        /* 基础点样式 */
        .dot {
            aspect-ratio: 1;
            border-radius: 50%;
            background-color: var(--dot-empty);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        /* 激活（过去）的点 */
        .dot.active {
            background-color: var(--dot-fill);
            box-shadow: 0 0 5px var(--glow);
        }

        /* 鼠标悬停交互 */
        .dot:hover {
            transform: scale(1.8);
            background-color: #f0f9ff !important;
            box-shadow: 0 0 15px #fff;
            z-index: 10;
        }

        /* 呼吸闪烁：正在发生的那个点 */
        @keyframes breathe {
            0% { opacity: 1; transform: scale(1); box-shadow: 0 0 5px var(--glow); }
            50% { opacity: 0.4; transform: scale(1.3); box-shadow: 0 0 15px var(--dot-fill); }
            100% { opacity: 1; transform: scale(1); box-shadow: 0 0 5px var(--glow); }
        }

        .current-moment {
            animation: breathe 2s infinite ease-in-out;
            background-color: #7dd3fc !important;
        }

        .percentage { color: var(--dot-fill); font-weight: bold; font-family: monospace; }
    </style>
</head>
<body>

<div class="container">
    <h1>时间轨迹可视化</h1>
    <div id="sections"></div>
</div>

<script>
    function updateVisuals() {
        const now = new Date();
        const container = document.getElementById('sections');
        container.innerHTML = ''; 

        // 1. 年 (天数)
        const startOfYear = new Date(now.getFullYear(), 0, 1);
        const endOfYear = new Date(now.getFullYear() + 1, 0, 1);
        const totalDaysYear = Math.ceil((endOfYear - startOfYear) / (1000 * 60 * 60 * 24));
        const passedDaysYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24));
        createGrid("年度进度 (Days)", totalDaysYear, passedDaysYear);

        // 2. 月 (天数)
        const totalDaysMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
        const passedDaysMonth = now.getDate() - 1; // 减1是为了标记当前这天为正在进行
        createGrid("月度进度 (Days)", totalDaysMonth, passedDaysMonth);

        // 3. 日 (小时)
        createGrid("今日进度 (Hours)", 24, now.getHours());

        // 4. 时 (分钟)
        createGrid("当前小时 (Minutes)", 60, now.getMinutes());
    }

    function createGrid(title, total, passed) {
        const sections = document.getElementById('sections');
        const percent = ((passed / total) * 100).toFixed(1);

        const section = document.createElement('div');
        section.className = 'section';
        
        const header = `
            <div class="header">
                <span>${title}</span>
                <span class="percentage">${percent}%</span>
            </div>
        `;
        
        const grid = document.createElement('div');
        grid.className = 'dots-grid';

        for (let i = 0; i < total; i++) {
            const dot = document.createElement('div');
            dot.className = 'dot';
            
            // 延时入场动画
            setTimeout(() => {
                if (i < passed) {
                    dot.classList.add('active');
                } else if (i === passed) {
                    dot.classList.add('current-moment'); // 当前正在流逝的点
                }
            }, i * 5); // 逐个亮起的动画效果

            grid.appendChild(dot);
        }

        section.innerHTML = header;
        section.appendChild(grid);
        sections.appendChild(section);
    }

    updateVisuals();
    // 每分钟检测一次更新
    setInterval(updateVisuals, 60000);
</script>

</body>
</html>
